# NATとは何か

## NATの概要

NAT (Network Address Translation) は、IPアドレスを変換する技術です。この技術は、主にプライベートネットワーク内のデバイスがインターネットなどの外部ネットワークと通信する際に利用されます。NATは、限られたグローバルIPアドレスを有効活用するために開発されました。

### IPアドレス枯渇問題とNATの登場背景

インターネットの普及に伴い、IPv4アドレスの枯渇が深刻な問題となりました。IPv4アドレスは32ビットで表現され、約43億個のアドレスしか存在しません。しかし、インターネットに接続されるデバイスの数は爆発的に増加し、すべてにグローバルIPアドレスを割り当てることは不可能になりました。この問題に対処するため、NATが考案されました。

NATは、プライベートIPアドレスとグローバルIPアドレスを変換することで、複数のデバイスが1つのグローバルIPアドレスを共有できるようにします。これにより、グローバルIPアドレスの消費を抑え、IPアドレス枯渇問題の緩和に貢献しました。

### プライベートIPアドレスとグローバルIPアドレス

```{note}
ここはおさらいみたいなものです。
忘れかけている方は、 [プライベートアドレス]({ref}private_addr) のセクションを参照してください。
```

*   **プライベートIPアドレス**: 組織や家庭内のローカルネットワークでのみ使用されるIPアドレスです。インターネット上では直接ルーティングされません。RFC 1918で定義された特定の範囲のアドレスがプライベートIPアドレスとして予約されています。
    *   10.0.0.0 - 10.255.255.255 (Aクラス)
    *   172.16.0.0 - 172.31.255.255 (Bクラス)
    *   192.168.0.0 - 192.168.255.255 (Cクラス)

*   **グローバルIPアドレス**: インターネット上で一意に識別されるIPアドレスです。インターネット上のデバイスと直接通信するために使用されます。

### NATのメリット・デメリット

#### メリット

*   **IPアドレスの節約**: 複数のプライベートIPアドレスを持つデバイスが、単一のグローバルIPアドレスを共有できます。これにより、グローバルIPアドレスの消費を抑えられます。
*   **セキュリティの向上**: 内部ネットワークのIPアドレスが外部から直接見えないため、外部からの不正アクセスに対する一定の防御になります。内部のネットワーク構成を隠蔽する効果もあります。

#### デメリット

*   **通信の複雑化**: NATデバイスがIPアドレスとポート番号の変換を行うため、通信経路が複雑になります。これにより、一部のアプリケーションやプロトコルで問題が発生する可能性があります。
*   **P2P通信の制限**: NAT環境下では、外部から内部の特定のデバイスへの直接接続が困難になる場合があります。これは、P2P (Peer-to-Peer) アプリケーションやオンラインゲームなどで問題となることがあります。
*   **ログの追跡困難**: 複数の内部デバイスが同じグローバルIPアドレスを共有するため、外部からの通信ログを追跡する際に、どの内部デバイスからの通信であるかを特定するのが難しくなることがあります。
